<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QuantumLeap | Official site for QuantumLeap Tuition Classes</title>

    <!-- css link -->
    <link rel="stylesheet" href="style.css" />

    <!-- google fonts link -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header>
      <div class="logo">
        <h1><span>Q</span>uantum<span>L</span>eap</h1>
      </div>
      <nav class="nav" id="nav-menu">
        <ion-icon
          name="close-outline"
          class="header-close"
          id="close-menu"
        ></ion-icon>

        <ul class="nav-list">
          <li class="nav-item"><a href="#" class="nav-link">Home</a></li>
          <li class="nav-item"><a href="#" class="nav-link">About</a></li>
          <li class="nav-item"><a href="#" class="nav-link">Contact</a></li>
          <li class="nav-item">
            <a href="#form" class="nav-link">Register</a>
          </li>
        </ul>
      </nav>

      <ion-icon
        name="menu-outline"
        class="header-toggle"
        id="toggle-menu"
      ></ion-icon>
    </header>

    <main>
      <!-- <section class="hero-section">
        <p class="quote">
          "The only person who is educated is the one who has learned how to
          learn and change."<span> - Carl Rogers</span>
        </p>
      </section> -->

      <section class="form-container" id="form">
        <form method="POST" name="google-sheet">
          <!-- student's name -->
          <label for="name">Student's Name</label>
          <input
            type="text"
            id="name"
            name="Student Name"
            placeholder="eg. Kirti Kousik"
          />

          <!-- parent's name -->
          <label for="parent-name">Father's / Mother's Name</label>
          <input
            type="text"
            id="parentName"
            name="Parent Name"
            placeholder="eg. Nirmalya Dey"
          />

          <!-- phone number -->
          <label for="name">Phone Number</label>
          <input
            type="text"
            id="phone"
            name="Phone Number"
            placeholder="123 456 7890"
          />

          <!-- email address -->
          <label for="email">Email (optional)</label>
          <input
            type="text"
            id="email"
            name="Email"
            placeholder="johndoe@gmail.com"
          />

          <!-- address -->
          <label for="address">Address</label>
          <input
            type="text"
            id="address"
            name="Address"
            placeholder="eg. Mundamal, Jajpur Rd."
          />

          <!-- choose online or offline -->
          <label for="choose-online">Online or Offline</label>
          <select name="Mode" id="choose-online">
            <option value="Offline">Offline</option>
            <option value="Online">Online</option>
          </select>

          <input type="submit" value="Submit" name="submit" />
        </form>
      </section>
    </main>

    <!-- js link -->
    <script>
      const navMenu = document.getElementById("nav-menu");
      const toggleMenu = document.getElementById("toggle-menu");
      const closeMenu = document.getElementById("close-menu");

      toggleMenu.addEventListener("click", () => {
        navMenu.classList.toggle("show");
      });

      closeMenu.addEventListener("click", () => {
        navMenu.classList.remove("show");
      });

      const scriptURL =
        "https://script.google.com/macros/s/AKfycbxFq1oYPfDq0YLfopfp3Nn4kh4dcjXbqQ6ctc7dKivAaamqNi4o0Dp0KmvJvmEnVrHr/exec";

      const form = document.forms["google-sheet"];

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        // Input validation
        const studentNameInput = document.getElementById("name");
        const parentNameInput = document.getElementById("parentName");
        const phoneInput = document.getElementById("phone");
        const emailInput = document.getElementById("email");
        const addressInput = document.getElementById("address");

        if (studentNameInput.value.trim() === "") {
          alert("Please enter the Student's Name.");
          return;
        }

        if (parentNameInput.value.trim() === "") {
          alert("Please enter the Father's / Mother's Name.");
          return;
        }

        if (phoneInput.value.trim() === "") {
          alert("Please enter the Phone Number.");
          return;
        }

        // Validate phone number length (must be 10 digits)
        if (!/^\d{10}$/.test(phoneInput.value.trim())) {
          alert("Please enter a valid 10-digit Phone Number.");
          return;
        }

        // Validate email format if provided
        if (emailInput.value.trim() !== "") {
          const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailPattern.test(emailInput.value.trim())) {
            alert("Please enter a valid Email address.");
            return;
          }
        }

        if (addressInput.value.trim() === "") {
          alert("Please enter the address.");
          return;
        }
        // end of input validation

        // Add the current date and time to the form data
        const currentDateTime = new Date();
        const formattedDateTime = currentDateTime.toLocaleString();

        // Create a new hidden input field to hold the date and time value
        const dateTimeInput = document.createElement("input");
        dateTimeInput.type = "hidden";
        dateTimeInput.name = "Submission Date and Time";
        dateTimeInput.value = formattedDateTime;

        // Append the hidden input field to the form
        form.appendChild(dateTimeInput);

        // Fetch the form data with the submission date and time
        fetch(scriptURL, {
          method: "POST",
          body: new FormData(form),
        })
          .then((response) => {
            form.reset();
            alert(
              "Your Response Has Been Submitted. We will contact you soon."
            );

            // Remove the hidden input field after form submission
            form.removeChild(dateTimeInput);
          })
          .catch((error) => console.error("Error!", error.message));
      });

      form.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          form.dispatchEvent(new Event("submit"));
        }
      });
    </script>

    <!-- ionicons link -->
    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>
  </body>
</html>
